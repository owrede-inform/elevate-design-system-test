// ELEVATE Design System Custom Styles
// Note: Font faces are defined in gatsby-theme-carbon/styles/internal/_plex.scss
// to avoid duplication and ensure proper loading

// Import ELEVATE Design Tokens CSS from npm package
@import '~@inform-elevate/elevate-design-tokens/dist/light.css';

// Import ELEVATE Design System Typography
@import './elevate-typography.scss';

// Import ESDS (ELEVATE System Design System) - Complete design system with colors and components
@import './esds-design-system.scss';

// UNIFIED THEME CONTROL - OVERRIDE EXTERNAL COMPONENT THEMES
// Prevent ELEVATE/Shoelace components from overriding our design system
:root,
:host,
.sl-theme-light,
.elvt-theme-light {
  // Override scrollbar color from white to dark (consistent with production)
  scrollbar-color: #4a4a4a #f0f0f0; // Dark thumb, light track
  
  // Force our color scheme over component themes
  color-scheme: light;
}

// GLOBAL SCROLLBAR DARK THEME
// Apply dark scrollbar globally to override any white scrollbars
html,
body,
*,
:root,
:host {
  // Modern scrollbar styling (Firefox)
  scrollbar-color: #4a4a4a #f0f0f0; // Dark thumb, light track
  scrollbar-width: thin;
}

// Webkit scrollbar styling for all browsers
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f0f0f0;
}

::-webkit-scrollbar-thumb {
  background: #4a4a4a;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #333;
}

// Override any component-specific scrollbar styling
* {
  scrollbar-color: #4a4a4a #f0f0f0; // Dark thumb, light track
  scrollbar-width: thin;
}

// CLEAN FONT SYSTEM - MINIMAL OVERRIDES
// Rely on SSR font loading for base fonts, only override specific cases

// Only override Carbon Design System classes that explicitly set different fonts
.cds--body,
.cds--body-compact-01,
.cds--body-compact-02,
.cds--body-01,
.cds--body-02,
h1, h2, h3, h4, h5, h6 {
  font-family: inherit; // Use the SSR-defined Inter font
}

// Clean font inheritance - no !important needed
button,
input,
select,
textarea {
  font-family: inherit;
}

// Preserve monospace fonts for code elements
code,
pre,
.cds--code-01,
.cds--code-02,
kbd,
samp,
var {
  font-family: 'Source Code Pro', 'Roboto Mono', 'JetBrains Mono', Monaco, 'Cascadia Code', 'Courier New', monospace;
}

// ELEVATE Components - Comprehensive Typography Fix
// Force Inter font on all ELEVATE components and override any Times/serif fallbacks
[class*="elvt-"],
[class*="elevate-"],
elvt-button,
elvt-input,
elvt-select,
elvt-card,
elvt-modal,
elvt-tooltip,
elvt-alert,
elvt-badge,
elvt-tab,
elvt-menu {
  // Force Inter font family across all ELEVATE components
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  
  // CSS Custom Properties for ELEVATE Design System
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --button-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --input-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --text-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --heading-font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segue UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  
  // Override any internal component font specifications
  * {
    font-family: inherit !important;
  }
}

// Aggressive font override for problematic serif/Times declarations
* {
  // Override any inline styles with Times or serif fonts
  &[style*="Times"],
  &[style*="serif"],
  &[style*="Georgia"],
  &[style*="Palatino"] {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segue UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  }
}

// Shadow DOM and Web Component font fix for ELEVATE components
// Target shadow DOM content directly
::slotted(*) {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segue UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

// Web Components global styling (for custom elements)
:defined {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segue UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

// LiveExample container - ELEVATE Components Isolation Zone
// CRITICAL: This container must ONLY use official ELEVATE Design Tokens
.live-example-container {
  // Reset all site-specific styles to prevent interference with ELEVATE components
  all: initial;
  
  // Only allow ELEVATE Design Tokens to style the content
  // Remove all custom font overrides - let ELEVATE use its official typography
  font-family: initial;
  
  // Create isolated styling context for ELEVATE components
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: flex-start;
  gap: 1rem;
  width: 100%;
  
  // CRITICAL: Prevent any ESDS or site styles from affecting ELEVATE components
  * {
    // Reset font inheritance - let ELEVATE Design Tokens handle typography
    font-family: initial !important;
    
    // Reset any color/spacing overrides that might interfere
    color: initial;
    margin: initial;
    padding: initial;
    
    // Let ELEVATE components use their own design tokens
    --font-family: initial;
    --button-font-family: initial;
    --input-font-family: initial;
    --text-font-family: initial;
    --heading-font-family: initial;
  }
  
  // Ensure ELEVATE web components are not affected by site CSS
  elvt-button,
  elvt-input,
  elvt-select,
  elvt-card,
  elvt-modal,
  elvt-tooltip,
  elvt-alert,
  elvt-badge,
  elvt-tab,
  elvt-menu,
  elvt-icon,
  elvt-checkbox,
  elvt-radio,
  elvt-switch,
  elvt-dropdown,
  elvt-dialog,
  elvt-drawer,
  elvt-expansion-panel,
  elvt-table,
  elvt-notification,
  elvt-link,
  elvt-divider,
  elvt-empty-state,
  elvt-avatar,
  elvt-breadcrumb,
  elvt-breadcrumb-item,
  elvt-button-group,
  elvt-card,
  elvt-charts,
  elvt-chip,
  elvt-date-picker,
  [class*="elvt-"],
  [class*="elevate-"] {
    // CRITICAL: Complete style isolation for ELEVATE components
    all: initial !important;
    
    // Reset any custom CSS variables that might interfere
    --font-family: initial !important;
    --button-font-family: initial !important;
    --input-font-family: initial !important;
    --text-font-family: initial !important;
    --heading-font-family: initial !important;
    
    // Reset INFORM brand colors to let ELEVATE use its own tokens
    --elevate-primary: initial !important;
    --elevate-primary-hover: initial !important;
    --elevate-secondary: initial !important;
    --elevate-background: initial !important;
    --elevate-text-primary: initial !important;
    --elevate-text-secondary: initial !important;
    
    // Reset ESDS constants that might interfere
    --esds-primary: initial !important;
    --esds-font-size-m: initial !important;
    --esds-spacing-l: initial !important;
    --esds-radius-card: initial !important;
    
    // Allow ELEVATE components to display properly
    display: initial !important;
    position: initial !important;
    
    // Reset any box model interference
    box-sizing: initial !important;
    margin: initial !important;
    padding: initial !important;
  }
}

// INFORM Brand Colors for ELEVATE Design System
:root {
  --elevate-primary: #0090a7; // INFORM Petrol
  --elevate-primary-hover: #007a8f; // Darker petrol for hover
  --elevate-secondary: #004759; // INFORM Dark green
  --elevate-accent: #0090a7; // Petrol for accents
  --elevate-success: #10b981; // Keep success green
  --elevate-warning: #f59e0b; // Keep warning amber
  --elevate-error: #ef4444; // Keep error red
  --elevate-text-primary: #000000; // INFORM Black
  --elevate-text-secondary: #4e5355; // INFORM Gray
  --elevate-background: #ffffff;
  --elevate-surface: #f9fafb;
  --elevate-border: #e5e7eb;
}

// Note: Typography is now handled by ELEVATE Design Tokens in elevate-typography.scss

// FeatureCard with ResourceCard properly overlaying image across all screen sizes
.homepage-feature {
  position: relative;
  width: 100%;
  overflow: hidden;
  
  // Image container serves as the positioning context
  .cds--feature-card__img {
    position: relative;
    width: 100%;
    margin-bottom: 0;
    overflow: hidden;
    
    img {
      display: block;
      width: 100%;
      height: auto;
    }
  }
  
  // CRITICAL FIX: Override Carbon's breakpoint-dependent positioning
  // Force absolute positioning across ALL screen sizes, not just md+
  .cds--feature-card__row {
    // Override Carbon's conditional absolute positioning
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    z-index: 10;
    pointer-events: none;
    
    // Force absolute positioning on ALL breakpoints (override Carbon's md+ only rule)
    @media (max-width: 671px) {
      position: absolute !important;
      left: 0 !important;
      bottom: 0 !important;
      width: 100% !important;
    }
    
    // Column positioning within the overlay
    .cds--feature-card__column {
      position: relative;
      display: flex;
      justify-content: flex-end;
      align-items: flex-end;
      width: 100%;
      height: 100%;
      margin: 0 !important;
      padding: 1rem;
      pointer-events: none;
      
      // Override Carbon's offset positioning that interferes with overlay
      left: auto !important;
      margin-left: 0 !important;
      
      // Responsive padding with viewport constraints
      @media (max-width: 768px) {
        padding: 0.75rem;
      }
      
      @media (max-width: 480px) {
        padding: 0.5rem;
      }
      
      @media (min-width: 1200px) {
        padding: 1.5rem;
      }
    }
  }
  
  // ResourceCard with stable 16:9 aspect ratio and safe boundaries
  .cds--tile {
    position: relative !important;
    margin: 0 !important;
    pointer-events: auto;
    flex-shrink: 0;
    
    // Fixed 16:9 aspect ratio with responsive sizing
    width: 280px;
    height: 157.5px;
    max-width: calc(100% - 2rem);
    max-height: calc(100% - 2rem);
    
    @media (max-width: 768px) {
      width: 200px;
      height: 112.5px;
      max-width: calc(100% - 1.5rem);
      max-height: calc(100% - 1.5rem);
    }
    
    @media (max-width: 480px) {
      width: 160px;
      height: 90px;
      max-width: calc(100% - 1rem);
      max-height: calc(100% - 1rem);
    }
    
    @media (min-width: 1200px) {
      width: 320px;
      height: 180px;
      max-width: calc(100% - 3rem);
      max-height: calc(100% - 3rem);
    }
    
    * {
      max-width: 100%;
      box-sizing: border-box;
    }
  }
  
  // Override Carbon's aspect ratio system that interferes with overlay
  .cds--aspect-ratio--1x1 {
    position: relative;
    
    &::before {
      @media (max-width: 672px) {
        padding-top: 0 !important;
      }
    }
  }
  
  .cds--aspect-ratio--object {
    @media (max-width: 672px) {
      position: static !important;
    }
  }
}

// Header customization
.bx--header {
  background-color: var(--elevate-primary);
  border-bottom: 1px solid var(--elevate-primary-hover);
}

// Homepage Dark Sidebar - Force dark theme on homepage
// Use multiple targeting approaches to ensure the sidebar is dark
.cds--side-nav.cds--side-nav--website--light,
.cds--side-nav.cds--side-nav--website,
.cds--side-nav {
  background-color: #262626 !important; // Force dark background
  border-right: 1px solid #393939 !important;
}

// Dark sidebar navigation background
.cds--side-nav--website--light .cds--side-nav__navigation,
.cds--side-nav--website .cds--side-nav__navigation,
.cds--side-nav__navigation {
  background-color: #262626 !important;
}

// Force all sidebar text to be light colored
.cds--side-nav .cds--side-nav__item .cds--side-nav__submenu,
.cds--side-nav .cds--side-nav__item > a.cds--side-nav__link,
.cds--side-nav a.cds--side-nav__link > .cds--side-nav__link-text,
.cds--side-nav--website--light .cds--side-nav__item .cds--side-nav__submenu,
.cds--side-nav--website--light .cds--side-nav__item > a.cds--side-nav__link,
.cds--side-nav--website--light a.cds--side-nav__link > .cds--side-nav__link-text {
  color: #f4f4f4 !important;
}

// Force all sidebar icons to be light colored
.cds--side-nav .cds--side-nav__icon > svg,
.cds--side-nav--website--light .cds--side-nav__icon > svg {
  fill: #f4f4f4 !important;
}

// Medium gray hover states
.cds--side-nav .cds--side-nav__item:not(.cds--side-nav__item--active):hover > .cds--side-nav__submenu,
.cds--side-nav .cds--side-nav__menu a.cds--side-nav__link:not(.cds--side-nav__link--current):not([aria-current='page']):hover,
.cds--side-nav .cds--side-nav__item:not(.cds--side-nav__item--active):hover > .cds--side-nav__link,
.cds--side-nav--website--light .cds--side-nav__item:not(.cds--side-nav__item--active):hover > .cds--side-nav__submenu,
.cds--side-nav--website--light .cds--side-nav__menu a.cds--side-nav__link:not(.cds--side-nav__link--current):not([aria-current='page']):hover,
.cds--side-nav--website--light .cds--side-nav__item:not(.cds--side-nav__item--active):hover > .cds--side-nav__link {
  background-color: #4a4a4a !important; // Medium gray hover
  color: #f4f4f4 !important;

  .cds--side-nav__link-text {
    color: #f4f4f4 !important;
  }

  .cds--side-nav__icon svg {
    fill: #f4f4f4 !important;
  }
}

// Active/Selected states - darker gray background with petrol indicator
.cds--side-nav a.cds--side-nav__link[aria-current='page'],
.cds--side-nav .cds--side-nav__menu a.cds--side-nav__link--current,
.cds--side-nav .cds--side-nav__menu a.cds--side-nav__link[aria-current='page'],
.cds--side-nav--website--light a.cds--side-nav__link[aria-current='page'],
.cds--side-nav--website--light .cds--side-nav__menu a.cds--side-nav__link--current,
.cds--side-nav--website--light .cds--side-nav__menu a.cds--side-nav__link[aria-current='page'] {
  background-color: #393939 !important; // Darker gray for selected
  color: #ffffff !important;
  position: relative;
  
  // Add petrol left border indicator for current page
  &::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 4px;
    background-color: var(--elevate-primary) !important; // INFORM Petrol indicator
  }
  
  .cds--side-nav__link-text {
    color: #ffffff !important;
  }
  
  .cds--side-nav__icon svg {
    fill: #ffffff !important;
  }
}

// Active submenu states with INFORM Petrol accent indicator
.cds--side-nav .cds--side-nav__item.cds--side-nav__item--active .cds--side-nav__submenu[aria-expanded='false'],
.cds--side-nav--website--light .cds--side-nav__item.cds--side-nav__item--active .cds--side-nav__submenu[aria-expanded='false'] {
  background-color: #393939 !important;
  color: #ffffff !important;
  
  // Petrol indicator on the left
  &::before {
    background-color: var(--elevate-primary) !important; // INFORM Petrol indicator
  }
  
  .cds--side-nav__link-text {
    color: #ffffff !important;
  }
  
  .cds--side-nav__icon svg {
    fill: #ffffff !important;
  }
}

// Fix expandable section title text color (like "Design Guidelines")
.cds--side-nav .cds--side-nav__item.cds--side-nav__item--active .cds--side-nav__submenu,
.cds--side-nav--website--light .cds--side-nav__item.cds--side-nav__item--active .cds--side-nav__submenu {
  color: #ffffff !important;
  
  .cds--side-nav__link-text {
    color: #ffffff !important;
  }
}

// More aggressive fix for expandable section titles when selected/active
.cds--side-nav .cds--side-nav__item--active > .cds--side-nav__submenu,
.cds--side-nav--website--light .cds--side-nav__item--active > .cds--side-nav__submenu,
.cds--side-nav .cds--side-nav__item--active .cds--side-nav__submenu[aria-expanded="true"],
.cds--side-nav--website--light .cds--side-nav__item--active .cds--side-nav__submenu[aria-expanded="true"] {
  color: #ffffff !important;
  
  // Target the text content directly
  .cds--side-nav__link-text,
  .cds--side-nav__submenu-title {
    color: #ffffff !important;
  }
  
  // Nuclear option for any text element
  * {
    color: #ffffff !important;
  }
}

// Expanded submenu styling
.cds--side-nav .cds--side-nav__item .cds--side-nav__submenu[aria-expanded='true'],
.cds--side-nav--website--light .cds--side-nav__item .cds--side-nav__submenu[aria-expanded='true'] {
  background-color: #393939 !important;
  color: #ffffff !important;

  &:hover {
    background-color: #4a4a4a !important; // Medium gray hover for expanded items
    color: #f4f4f4 !important;

    .cds--side-nav__icon svg {
      fill: #f4f4f4 !important;
    }
  }

  .cds--side-nav__icon svg {
    fill: #ffffff !important;
  }
}

// Legacy navigation customization (fallback)
.bx--side-nav {
  background-color: var(--elevate-surface);
  border-right: 1px solid var(--elevate-border);
}

.bx--side-nav__link {
  color: var(--elevate-text-primary);
  
  &:hover {
    background-color: var(--elevate-primary);
    color: white;
  }
}

// Override IBM Blue navigation indicator with INFORM Petrol
.cds--side-nav.cds--side-nav--website--light
  .cds--side-nav__item.cds--side-nav__item--active
  .cds--side-nav__submenu[aria-expanded='false'] {
  &::before {
    background-color: var(--elevate-primary) !important; // INFORM Petrol instead of IBM Blue
  }
}

// Additional override for any other hardcoded $interactive-01 usage in sidebar
.cds--side-nav.cds--side-nav--website--light
  .cds--side-nav__item.cds--side-nav__item--active
  .cds--side-nav__submenu {
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 4px;
    background-color: var(--elevate-primary) !important; // Force INFORM Petrol over IBM Blue
  }
}

// Nuclear option: Override ALL possible IBM blue indicators in sidebar
.cds--side-nav *::before,
.cds--side-nav--website--light *::before {
  background-color: var(--elevate-primary) !important;
}

// Nuclear option: Force ALL text in sidebar to be white (prevent any black text)
.cds--side-nav,
.cds--side-nav--website--light {
  * {
    color: #f4f4f4 !important;
  }
  
  // Specifically target any expandable section titles
  .cds--side-nav__item--active {
    * {
      color: #ffffff !important;
    }
  }
}

// Ensure the current page link has petrol indicator regardless of structure
.cds--side-nav [aria-current="page"]::before,
.cds--side-nav--website--light [aria-current="page"]::before,
.cds--side-nav .cds--side-nav__link--current::before,
.cds--side-nav--website--light .cds--side-nav__link--current::before {
  background-color: var(--elevate-primary) !important;
}
// Link styling
a {
  color: var(--elevate-primary);
  
  &:hover {
    color: var(--elevate-primary-hover);
  }
}

// Button customization
.bx--btn--primary {
  background-color: var(--elevate-primary);
  border-color: var(--elevate-primary);
  
  &:hover {
    background-color: var(--elevate-primary-hover);
  }
}

// Card styling
.bx--tile {
  border: 1px solid var(--elevate-border);
  border-radius: 8px;
  transition: all 0.2s ease;
  
  &:hover {
    border-color: var(--elevate-primary);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
  }
}

#gatsby-focus-wrapper {
  padding-top: 3rem;

  @media (min-width: 672px) {
    padding-top: 2rem;
  }
}

// NUCLEAR APPROACH: Remove ALL semi-transparent overlays on mobile
// EXCEPTION: Preserve ESDS feature card overlays - they are intentional UI components
@media (max-width: 1055px) {
  // CRITICAL: Preserve ESDS FeatureCard2 overlays from being removed
  .esds-feature-card__overlay {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    z-index: 20 !important;
    
    // Ensure ResourceCard2 inside remains visible
    .esds-resource-card {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
      pointer-events: auto !important;
    }
  }
  
  // Target ANY element that could be creating the overlay with maximum specificity
  body * {
    // Remove any element with semi-transparent background
    &[style*="rgba(0,0,0,"],
    &[style*="rgba(0, 0, 0,"] {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
    
    // Remove any element with overlay-01 background (Carbon variable)
    &[style*="background: rgba(0, 0, 0, 0.5)"],
    &[style*="background:rgba(0,0,0,0.5)"],
    &[style*="background: #161616cc"],
    &[style*="background:#161616cc"],
    &[style*="background-color: rgba(0, 0, 0, 0.5)"],
    &[style*="background-color:rgba(0,0,0,0.5)"] {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
  }
  
  // Remove ALL overlays regardless of class with maximum specificity
  // EXCEPTION: Do not remove ESDS feature card overlays
  body .overlay:not(.esds-feature-card__overlay),
  body [class*="overlay"]:not(.esds-feature-card__overlay):not([class*="esds-feature-card__overlay"]),
  body [class*="backdrop"]:not(.esds-feature-card__overlay),
  body [class*="modal"]:not(.esds-feature-card__overlay),
  body [id*="overlay"]:not(.esds-feature-card__overlay),
  body [data-overlay]:not(.esds-feature-card__overlay),
  .overlay:not(.esds-feature-card__overlay),
  [class*="overlay"]:not(.esds-feature-card__overlay):not([class*="esds-feature-card__overlay"]),
  [class*="backdrop"]:not(.esds-feature-card__overlay),
  [class*="modal"]:not(.esds-feature-card__overlay),
  [id*="overlay"]:not(.esds-feature-card__overlay),
  [data-overlay]:not(.esds-feature-card__overlay) {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }
  
  // Remove ALL pseudo-elements that could be overlays with maximum specificity
  body *::before,
  body *::after,
  *::before,
  *::after {
    // Target fixed position pseudo-elements
    &[style*="position: fixed"],
    &[style*="position:fixed"] {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
    
    // Target any pseudo-element with rgba background
    &[style*="rgba"],
    &[style*="background"] {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
  }
  
  // Nuclear option: Remove ALL fixed positioned elements completely
  // EXCEPTION: Preserve ESDS components
  body *[style*="position: fixed"]:not(.esds-feature-card__overlay):not(.esds-resource-card),
  *[style*="position: fixed"]:not(.esds-feature-card__overlay):not(.esds-resource-card) {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
    
    // Also target if they have z-index
    &[style*="z-index"] {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
  }
  
  // Specific Carbon overlay killers with maximum specificity
  body .cds--side-nav + *::before,
  body .cds--side-nav + *::after,
  body .cds--side-nav--website + *::before,
  body .cds--side-nav--website + *::after,
  .cds--side-nav + *::before,
  .cds--side-nav + *::after,
  .cds--side-nav--website + *::before,
  .cds--side-nav--website + *::after {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }
  
  // Additional nuclear approach: Remove any element with high z-index that might be an overlay
  body *[style*="z-index: 9"],
  body *[style*="z-index:9"],
  *[style*="z-index: 9"],
  *[style*="z-index:9"] {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }
  
  // Remove any dynamically injected overlay elements
  body > div[style*="position: fixed"],
  body > div[style*="position:fixed"] {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }
  
  // DIRECT TARGET: Container overlay from gatsby-theme-carbon
  // This directly targets the specific overlay component causing the issue
  div[role="button"][aria-labelledby="overlay-label"],
  .overlay,
  [class*="Container-module--overlay"],
  [class*="container-module--overlay"],
  // CARBON DESIGN SYSTEM: Target the actual HTML overlay element
  .cds--side-nav__overlay,
  .cds--side-nav__overlay-active,
  div.cds--side-nav__overlay,
  div.cds--side-nav__overlay-active {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
    z-index: -9999 !important;
  }
}
