// ELEVATE Design System Custom Styles
// Note: Font faces are defined in gatsby-theme-carbon/styles/internal/_plex.scss
// to avoid duplication and ensure proper loading

// ELEVATE Design Tokens CSS will be loaded via JavaScript to avoid SASS import issues

// Import ELEVATE Design System Typography
@import './elevate-typography.scss';

// GLOBAL FONT OVERRIDE - Ensure Inter is used everywhere except code
// Override all Carbon theme font stacks specifically, but preserve monospace for code
body,
html,
.cds--body,
.cds--body-compact-01,
.cds--body-compact-02,
.cds--body-01,
.cds--body-02,
.cds--caption-01,
.cds--caption-02,
.cds--label-01,
.cds--label-02,
.cds--helper-text-01,
.cds--helper-text-02,
.cds--legal-01,
.cds--legal-02,
.cds--productive-heading-01,
.cds--productive-heading-02,
.cds--productive-heading-03,
.cds--productive-heading-04,
.cds--productive-heading-05,
.cds--productive-heading-06,
.cds--productive-heading-07,
.cds--expressive-heading-01,
.cds--expressive-heading-02,
.cds--expressive-heading-03,
.cds--expressive-heading-04,
.cds--expressive-heading-05,
.cds--expressive-heading-06,
.cds--expressive-paragraph-01,
.cds--quotation-01,
.cds--quotation-02,
.cds--display-01,
.cds--display-02,
.cds--display-03,
.cds--display-04 {
  font-family: 'Inter Var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

// Ensure all interactive elements use Inter
button,
input,
select,
textarea,
.cds--btn,
.cds--tab,
.cds--tabs,
.cds--tab--list,
.cds--side-nav,
.cds--side-nav__link-text,
.cds--header,
.cds--header__name,
.cds--header__menu-title,
.cds--switcher,
.cds--switcher__item,
a:not(code a):not(pre a) {
  font-family: 'Inter Var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

// Preserve monospace fonts for code elements
code,
pre,
.cds--code-01,
.cds--code-02,
kbd,
samp,
var {
  font-family: 'Source Code Pro Var', 'Source Code Pro', 'Roboto Mono Var', 'Roboto Mono', 'JetBrains Mono', Monaco, 'Cascadia Code', 'Courier New', monospace !important;
}

// ELEVATE Components Font Override - Nuclear approach
// Ensure ELEVATE web components use Inter font family with maximum specificity
elvt-button,
elvt-icon,
elvt-badge,
elvt-card,
elvt-chip,
elvt-dialog,
elvt-dropdown,
elvt-input,
elvt-link,
elvt-notification,
elvt-switch,
elvt-table,
elvt-tooltip,
elevate-button,
[class*="elvt-"],
[class*="elevate-"],
// Target shadow DOM content
elvt-button::part(base),
elvt-button::part(label),
elvt-button::part(prefix),
elvt-button::part(suffix) {
  font-family: 'Inter Var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  
  // Ensure all child elements also inherit Inter
  * {
    font-family: inherit !important;
  }
  
  // Target anything that might have Times or serif
  &, * {
    font-family: 'Inter Var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  }
}

// Additional targeting for web component internals
elvt-button {
  --font-family: 'Inter Var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  --button-font-family: 'Inter Var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  
  // Override any internal button styles
  button, .button, [role="button"] {
    font-family: 'Inter Var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  }
}

// Global override for any element that might have Times
* {
  &[style*="Times"],
  &[style*="serif"] {
    font-family: 'Inter Var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  }
}

// Override for LiveExample container to ensure ELEVATE components inherit properly
.live-example-container,
[data-live-example] {
  font-family: 'Inter Var', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  
  * {
    font-family: inherit !important;
  }
}

// INFORM Brand Colors for ELEVATE Design System
:root {
  --elevate-primary: #0090a7; // INFORM Petrol
  --elevate-primary-hover: #007a8f; // Darker petrol for hover
  --elevate-secondary: #004759; // INFORM Dark green
  --elevate-accent: #0090a7; // Petrol for accents
  --elevate-success: #10b981; // Keep success green
  --elevate-warning: #f59e0b; // Keep warning amber
  --elevate-error: #ef4444; // Keep error red
  --elevate-text-primary: #000000; // INFORM Black
  --elevate-text-secondary: #4e5355; // INFORM Gray
  --elevate-background: #ffffff;
  --elevate-surface: #f9fafb;
  --elevate-border: #e5e7eb;
}

// Note: Typography is now handled by ELEVATE Design Tokens in elevate-typography.scss

// Custom brand styling
.homepage-feature {
  background: linear-gradient(135deg, var(--elevate-primary) 0%, var(--elevate-secondary) 100%);
}

// Header customization
.bx--header {
  background-color: var(--elevate-primary);
  border-bottom: 1px solid var(--elevate-primary-hover);
}

// Homepage Dark Sidebar - Force dark theme on homepage
// Use multiple targeting approaches to ensure the sidebar is dark
.cds--side-nav.cds--side-nav--website--light,
.cds--side-nav.cds--side-nav--website,
.cds--side-nav {
  background-color: #262626 !important; // Force dark background
  border-right: 1px solid #393939 !important;
}

// Dark sidebar navigation background
.cds--side-nav--website--light .cds--side-nav__navigation,
.cds--side-nav--website .cds--side-nav__navigation,
.cds--side-nav__navigation {
  background-color: #262626 !important;
}

// Force all sidebar text to be light colored
.cds--side-nav .cds--side-nav__item .cds--side-nav__submenu,
.cds--side-nav .cds--side-nav__item > a.cds--side-nav__link,
.cds--side-nav a.cds--side-nav__link > .cds--side-nav__link-text,
.cds--side-nav--website--light .cds--side-nav__item .cds--side-nav__submenu,
.cds--side-nav--website--light .cds--side-nav__item > a.cds--side-nav__link,
.cds--side-nav--website--light a.cds--side-nav__link > .cds--side-nav__link-text {
  color: #f4f4f4 !important;
}

// Force all sidebar icons to be light colored
.cds--side-nav .cds--side-nav__icon > svg,
.cds--side-nav--website--light .cds--side-nav__icon > svg {
  fill: #f4f4f4 !important;
}

// Medium gray hover states
.cds--side-nav .cds--side-nav__item:not(.cds--side-nav__item--active):hover > .cds--side-nav__submenu,
.cds--side-nav .cds--side-nav__menu a.cds--side-nav__link:not(.cds--side-nav__link--current):not([aria-current='page']):hover,
.cds--side-nav .cds--side-nav__item:not(.cds--side-nav__item--active):hover > .cds--side-nav__link,
.cds--side-nav--website--light .cds--side-nav__item:not(.cds--side-nav__item--active):hover > .cds--side-nav__submenu,
.cds--side-nav--website--light .cds--side-nav__menu a.cds--side-nav__link:not(.cds--side-nav__link--current):not([aria-current='page']):hover,
.cds--side-nav--website--light .cds--side-nav__item:not(.cds--side-nav__item--active):hover > .cds--side-nav__link {
  background-color: #4a4a4a !important; // Medium gray hover
  color: #f4f4f4 !important;

  .cds--side-nav__link-text {
    color: #f4f4f4 !important;
  }

  .cds--side-nav__icon svg {
    fill: #f4f4f4 !important;
  }
}

// Active/Selected states - darker gray background with petrol indicator
.cds--side-nav a.cds--side-nav__link[aria-current='page'],
.cds--side-nav .cds--side-nav__menu a.cds--side-nav__link--current,
.cds--side-nav .cds--side-nav__menu a.cds--side-nav__link[aria-current='page'],
.cds--side-nav--website--light a.cds--side-nav__link[aria-current='page'],
.cds--side-nav--website--light .cds--side-nav__menu a.cds--side-nav__link--current,
.cds--side-nav--website--light .cds--side-nav__menu a.cds--side-nav__link[aria-current='page'] {
  background-color: #393939 !important; // Darker gray for selected
  color: #ffffff !important;
  position: relative;
  
  // Add petrol left border indicator for current page
  &::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 4px;
    background-color: var(--elevate-primary) !important; // INFORM Petrol indicator
  }
  
  .cds--side-nav__link-text {
    color: #ffffff !important;
  }
  
  .cds--side-nav__icon svg {
    fill: #ffffff !important;
  }
}

// Active submenu states with INFORM Petrol accent indicator
.cds--side-nav .cds--side-nav__item.cds--side-nav__item--active .cds--side-nav__submenu[aria-expanded='false'],
.cds--side-nav--website--light .cds--side-nav__item.cds--side-nav__item--active .cds--side-nav__submenu[aria-expanded='false'] {
  background-color: #393939 !important;
  color: #ffffff !important;
  
  // Petrol indicator on the left
  &::before {
    background-color: var(--elevate-primary) !important; // INFORM Petrol indicator
  }
  
  .cds--side-nav__link-text {
    color: #ffffff !important;
  }
  
  .cds--side-nav__icon svg {
    fill: #ffffff !important;
  }
}

// Fix expandable section title text color (like "Design Guidelines")
.cds--side-nav .cds--side-nav__item.cds--side-nav__item--active .cds--side-nav__submenu,
.cds--side-nav--website--light .cds--side-nav__item.cds--side-nav__item--active .cds--side-nav__submenu {
  color: #ffffff !important;
  
  .cds--side-nav__link-text {
    color: #ffffff !important;
  }
}

// More aggressive fix for expandable section titles when selected/active
.cds--side-nav .cds--side-nav__item--active > .cds--side-nav__submenu,
.cds--side-nav--website--light .cds--side-nav__item--active > .cds--side-nav__submenu,
.cds--side-nav .cds--side-nav__item--active .cds--side-nav__submenu[aria-expanded="true"],
.cds--side-nav--website--light .cds--side-nav__item--active .cds--side-nav__submenu[aria-expanded="true"] {
  color: #ffffff !important;
  
  // Target the text content directly
  .cds--side-nav__link-text,
  .cds--side-nav__submenu-title {
    color: #ffffff !important;
  }
  
  // Nuclear option for any text element
  * {
    color: #ffffff !important;
  }
}

// Expanded submenu styling
.cds--side-nav .cds--side-nav__item .cds--side-nav__submenu[aria-expanded='true'],
.cds--side-nav--website--light .cds--side-nav__item .cds--side-nav__submenu[aria-expanded='true'] {
  background-color: #393939 !important;
  color: #ffffff !important;

  &:hover {
    background-color: #4a4a4a !important; // Medium gray hover for expanded items
    color: #f4f4f4 !important;

    .cds--side-nav__icon svg {
      fill: #f4f4f4 !important;
    }
  }

  .cds--side-nav__icon svg {
    fill: #ffffff !important;
  }
}

// Legacy navigation customization (fallback)
.bx--side-nav {
  background-color: var(--elevate-surface);
  border-right: 1px solid var(--elevate-border);
}

.bx--side-nav__link {
  color: var(--elevate-text-primary);
  
  &:hover {
    background-color: var(--elevate-primary);
    color: white;
  }
}

// Override IBM Blue navigation indicator with INFORM Petrol
.cds--side-nav.cds--side-nav--website--light
  .cds--side-nav__item.cds--side-nav__item--active
  .cds--side-nav__submenu[aria-expanded='false'] {
  &::before {
    background-color: var(--elevate-primary) !important; // INFORM Petrol instead of IBM Blue
  }
}

// Additional override for any other hardcoded $interactive-01 usage in sidebar
.cds--side-nav.cds--side-nav--website--light
  .cds--side-nav__item.cds--side-nav__item--active
  .cds--side-nav__submenu {
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: 4px;
    background-color: var(--elevate-primary) !important; // Force INFORM Petrol over IBM Blue
  }
}

// Nuclear option: Override ALL possible IBM blue indicators in sidebar
.cds--side-nav *::before,
.cds--side-nav--website--light *::before {
  background-color: var(--elevate-primary) !important;
}

// Nuclear option: Force ALL text in sidebar to be white (prevent any black text)
.cds--side-nav,
.cds--side-nav--website--light {
  * {
    color: #f4f4f4 !important;
  }
  
  // Specifically target any expandable section titles
  .cds--side-nav__item--active {
    * {
      color: #ffffff !important;
    }
  }
}

// Ensure the current page link has petrol indicator regardless of structure
.cds--side-nav [aria-current="page"]::before,
.cds--side-nav--website--light [aria-current="page"]::before,
.cds--side-nav .cds--side-nav__link--current::before,
.cds--side-nav--website--light .cds--side-nav__link--current::before {
  background-color: var(--elevate-primary) !important;
}
// Link styling
a {
  color: var(--elevate-primary);
  
  &:hover {
    color: var(--elevate-primary-hover);
  }
}

// Button customization
.bx--btn--primary {
  background-color: var(--elevate-primary);
  border-color: var(--elevate-primary);
  
  &:hover {
    background-color: var(--elevate-primary-hover);
  }
}

// Card styling
.bx--tile {
  border: 1px solid var(--elevate-border);
  border-radius: 8px;
  transition: all 0.2s ease;
  
  &:hover {
    border-color: var(--elevate-primary);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
  }
}

#gatsby-focus-wrapper {
  padding-top: 3rem;

  @media (min-width: 672px) {
    padding-top: 2rem;
  }
}

// AGGRESSIVE APPROACH: Remove ALL semi-transparent overlays on mobile
@media (max-width: 1055px) {
  // Target ANY element that could be creating the overlay
  * {
    // Remove any element with semi-transparent background
    &[style*="rgba(0,0,0,"] {
      display: none !important;
    }
    
    // Remove any element with overlay-01 background (Carbon variable)
    &[style*="background: rgba(0, 0, 0, 0.5)"],
    &[style*="background:rgba(0,0,0,0.5)"],
    &[style*="background: #161616cc"],
    &[style*="background:#161616cc"] {
      display: none !important;
    }
  }
  
  // Remove ALL overlays regardless of class
  .overlay,
  [class*="overlay"],
  [class*="backdrop"],
  [id*="overlay"],
  [data-overlay] {
    display: none !important;
  }
  
  // Remove ALL pseudo-elements that could be overlays
  *::before,
  *::after {
    &[style*="position: fixed"],
    &[style*="rgba"] {
      display: none !important;
    }
  }
  
  // Nuclear option: Remove ALL fixed positioned elements with z-index > 50
  *[style*="position: fixed"] {
    &[style*="z-index"] {
      display: none !important;
    }
  }
  
  // Specific Carbon overlay killers
  .cds--side-nav + *::before,
  .cds--side-nav + *::after,
  .cds--side-nav--website + *::before,
  .cds--side-nav--website + *::after {
    display: none !important;
  }
}
